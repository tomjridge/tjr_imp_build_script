<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Base_types (tjr_btree.Tjr_btree.Base_types)</title><link rel="stylesheet" href="../../../odoc.css"/><meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><meta name="generator" content="doc-ock-html v1.0.0-1-g1fc9bf0"/></head><body><nav id="top"><a href="../index.html">Up</a> &mdash; <span class="package">package <a href="../../index.html">tjr_btree</a></span></nav><header><h1><span class="keyword">Module</span> <span class="module-path">Tjr_btree.Base_types</span></h1></header><p>Collect base types together with sensible names</p><div class="spec include"><div class="doc"></div><details open="open"><summary><span class="def"><code><span class="keyword">include </span><a href="../../../tjr_fs_shared/Tjr_fs_shared/index.html">Tjr_fs_shared</a></code></span></summary><div class="spec module" id="module-File_util"><a href="#module-File_util" class="anchor"></a><div class="def module"><code><span class="keyword">module </span>File_util = <a href="../../../tjr_fs_shared/Tjr_fs_shared__File_util/index.html">Tjr_fs_shared__File_util</a></code></div><div class="doc"></div></div><div class="spec module" id="module-Global"><a href="#module-Global" class="anchor"></a><div class="def module"><code><span class="keyword">module </span>Global = <a href="../../../tjr_fs_shared/Tjr_fs_shared__Global/index.html">Tjr_fs_shared__Global</a></code></div><div class="doc"></div></div><div class="spec module" id="module-Logger"><a href="#module-Logger" class="anchor"></a><div class="def module"><code><span class="keyword">module </span>Logger = <a href="../../../tjr_fs_shared/Tjr_fs_shared__Logger/index.html">Tjr_fs_shared__Logger</a></code></div><div class="doc"></div></div><div class="spec module" id="module-Map_ops_datatypes"><a href="#module-Map_ops_datatypes" class="anchor"></a><div class="def module"><code><span class="keyword">module </span>Map_ops_datatypes = <a href="../../../tjr_fs_shared/Tjr_fs_shared__Map_ops_datatypes/index.html">Tjr_fs_shared__Map_ops_datatypes</a></code></div><div class="doc"></div></div></details></div><div class="spec include"><div class="doc"></div><details open="open"><summary><span class="def"><code><span class="keyword">include </span><a href="../index.html#module-Internal_base_types_pervasives">Internal_base_types_pervasives</a></code></span></summary><p>Common types and definitions.</p><div class="spec type" id="type-res"><a href="#type-res" class="anchor"></a><div class="def type"><code><span class="keyword">type </span>'a res</code><code><span class="keyword"> = </span><span class="type-var">'a</span> <a href="../../../isa_btree/Isa_btree/Isa_export/Util/index.html#type-res">Isa_btree.Isa_export.Util.res</a></code><code></code></div><div class="doc"><p>The result type. <code class="code">'a res</code> is equal to <code class="code">Ok of 'a | Error of string</code></p></div></div><div class="spec val" id="val-option_map"><a href="#val-option_map" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>option_map : (<span class="type-var">'a</span> <span class="keyword">&#8209;&gt;</span> <span class="type-var">'b</span>) <span class="keyword">&#8209;&gt;</span> <span class="type-var">'a</span> option <span class="keyword">&#8209;&gt;</span> <span class="type-var">'b</span> option</code></div><div class="doc"></div></div><div class="spec val" id="val-dest_Some"><a href="#val-dest_Some" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>dest_Some : <span class="type-var">'a</span> option <span class="keyword">&#8209;&gt;</span> <span class="type-var">'a</span></code></div><div class="doc"></div></div><div class="spec val" id="val-is_None"><a href="#val-is_None" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>is_None : <span class="type-var">'a</span> option <span class="keyword">&#8209;&gt;</span> bool</code></div><div class="doc"></div></div><div class="spec val" id="val-is_Some"><a href="#val-is_Some" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>is_Some : <span class="type-var">'a</span> option <span class="keyword">&#8209;&gt;</span> bool</code></div><div class="doc"></div></div><div class="spec val" id="val-impossible"><a href="#val-impossible" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>impossible : string <span class="keyword">&#8209;&gt;</span> <span class="type-var">'a</span></code></div><div class="doc"><p>A synonym for <code class="code">failwith</code>, used to mark supposedly impossible
situations. Should never be called.</p></div></div><div class="spec val" id="val-flush_out"><a href="#val-flush_out" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>flush_out : unit <span class="keyword">&#8209;&gt;</span> unit</code></div><div class="doc"></div></div></details></div><div class="spec include"><div class="doc"></div><details open="open"><summary><span class="def"><code><span class="keyword">include </span><a href="../index.html#module-Tree">Tree</a></code></span></summary><p>The B-tree tree type.</p><div class="spec include"><div class="doc"></div><details open="open"><summary><span class="def"><code><span class="keyword">include </span><a href="../../../isa_btree/Isa_btree/Isa_export/index.html#module-Tree">Isa_btree.Isa_export.Tree</a></code></span></summary><div class="spec type" id="type-tree"><a href="#type-tree" class="anchor"></a><div class="def type"><code><span class="keyword">type </span>('a, 'b) tree</code><code></code><code><span class="keyword"> = </span></code><table class="variant"><tr id="type-tree.Node" class="anchored"><td class="def constructor"><a href="#type-tree.Node" class="anchor"></a><code><span class="keyword">| </span></code><code><span class="constructor">Node</span><span class="keyword"> of </span><span class="type-var">'a</span> list<span class="keyword"> * </span>(<span class="type-var">'a</span>, <span class="type-var">'b</span>) <a href="index.html#type-tree">tree</a> list</code></td></tr><tr id="type-tree.Leaf" class="anchored"><td class="def constructor"><a href="#type-tree.Leaf" class="anchor"></a><code><span class="keyword">| </span></code><code><span class="constructor">Leaf</span><span class="keyword"> of </span>(<span class="type-var">'a</span><span class="keyword"> * </span><span class="type-var">'b</span>) list</code></td></tr></table><code></code></div><div class="doc"></div></div><div class="spec val" id="val-tree_to_yojson"><a href="#val-tree_to_yojson" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>tree_to_yojson : (<span class="type-var">'a</span> <span class="keyword">&#8209;&gt;</span> Yojson.Safe.json) <span class="keyword">&#8209;&gt;</span> (<span class="type-var">'b</span> <span class="keyword">&#8209;&gt;</span> Yojson.Safe.json) <span class="keyword">&#8209;&gt;</span> (<span class="type-var">'a</span>, <span class="type-var">'b</span>) <a href="index.html#type-tree">tree</a> <span class="keyword">&#8209;&gt;</span> Yojson.Safe.json</code></div><div class="doc"></div></div><div class="spec val" id="val-tree_of_yojson"><a href="#val-tree_of_yojson" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>tree_of_yojson : (Yojson.Safe.json <span class="keyword">&#8209;&gt;</span> <span class="type-var">'a</span> Ppx_deriving_yojson_runtime.error_or) <span class="keyword">&#8209;&gt;</span> (Yojson.Safe.json <span class="keyword">&#8209;&gt;</span> <span class="type-var">'b</span> Ppx_deriving_yojson_runtime.error_or) <span class="keyword">&#8209;&gt;</span> Yojson.Safe.json <span class="keyword">&#8209;&gt;</span> (<span class="type-var">'a</span>, <span class="type-var">'b</span>) <a href="index.html#type-tree">tree</a> Ppx_deriving_yojson_runtime.error_or</code></div><div class="doc"></div></div><div class="spec val" id="val-height"><a href="#val-height" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>height : (<span class="type-var">'a</span>, <span class="type-var">'b</span>) <a href="index.html#type-tree">tree</a> <span class="keyword">&#8209;&gt;</span> <a href="../../../isa_btree/Isa_btree/Isa_export/Arith/index.html#type-nat">Isa_btree.Isa_export.Arith.nat</a></code></div><div class="doc"></div></div><div class="spec val" id="val-dest_Node"><a href="#val-dest_Node" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>dest_Node : (<span class="type-var">'a</span>, <span class="type-var">'b</span>) <a href="index.html#type-tree">tree</a> <span class="keyword">&#8209;&gt;</span> <span class="type-var">'a</span> list<span class="keyword"> * </span>(<span class="type-var">'a</span>, <span class="type-var">'b</span>) <a href="index.html#type-tree">tree</a> list</code></div><div class="doc"></div></div><div class="spec val" id="val-tree_equal"><a href="#val-tree_equal" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>tree_equal : (<span class="type-var">'a</span>, <span class="type-var">'b</span>) <a href="index.html#type-tree">tree</a> <span class="keyword">&#8209;&gt;</span> (<span class="type-var">'a</span>, <span class="type-var">'b</span>) <a href="index.html#type-tree">tree</a> <span class="keyword">&#8209;&gt;</span> bool</code></div><div class="doc"></div></div><div class="spec val" id="val-tree_to_leaves"><a href="#val-tree_to_leaves" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>tree_to_leaves : (<span class="type-var">'a</span>, <span class="type-var">'b</span>) <a href="index.html#type-tree">tree</a> <span class="keyword">&#8209;&gt;</span> (<span class="type-var">'a</span><span class="keyword"> * </span><span class="type-var">'b</span>) list list</code></div><div class="doc"></div></div><div class="spec val" id="val-tree_to_kvs"><a href="#val-tree_to_kvs" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>tree_to_kvs : (<span class="type-var">'a</span>, <span class="type-var">'b</span>) <a href="index.html#type-tree">tree</a> <span class="keyword">&#8209;&gt;</span> (<span class="type-var">'a</span><span class="keyword"> * </span><span class="type-var">'b</span>) list</code></div><div class="doc"></div></div><div class="spec val" id="val-tree_to_keys"><a href="#val-tree_to_keys" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>tree_to_keys : (<span class="type-var">'a</span>, <span class="type-var">'b</span>) <a href="index.html#type-tree">tree</a> <span class="keyword">&#8209;&gt;</span> <span class="type-var">'a</span> <a href="../../../isa_btree/Isa_btree/Isa_export/Set/index.html#type-set">Isa_btree.Isa_export.Set.set</a></code></div><div class="doc"></div></div><div class="spec val" id="val-wellformed_tree"><a href="#val-wellformed_tree" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>wellformed_tree : unit <a href="../../../isa_btree/Isa_btree/Isa_export/Prelude/index.html#type-constants_ext">Isa_btree.Isa_export.Prelude.constants_ext</a> <span class="keyword">&#8209;&gt;</span> <a href="../../../isa_btree/Isa_btree/Isa_export/Prelude/index.html#type-min_size_t">Isa_btree.Isa_export.Prelude.min_size_t</a> option <span class="keyword">&#8209;&gt;</span> (<span class="type-var">'a</span> <span class="keyword">&#8209;&gt;</span> <span class="type-var">'a</span> <span class="keyword">&#8209;&gt;</span> <a href="../../../isa_btree/Isa_btree/Isa_export/Arith/index.html#type-int">Isa_btree.Isa_export.Arith.int</a>) <span class="keyword">&#8209;&gt;</span> (<span class="type-var">'a</span>, <span class="type-var">'b</span>) <a href="index.html#type-tree">tree</a> <span class="keyword">&#8209;&gt;</span> bool</code></div><div class="doc"></div></div></details></div><div class="spec module" id="module-Tree_type"><a href="#module-Tree_type" class="anchor"></a><div class="def module"><code><span class="keyword">module </span>Tree_type = <a href="../Tree/index.html#module-Tree_type">Tree.Tree_type</a></code></div><div class="doc"></div></div><div class="spec val" id="val-wellformed_tree'"><a href="#val-wellformed_tree'" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>wellformed_tree' : unit <a href="../../../isa_btree/Isa_btree__Isa_export/Prelude/index.html#type-constants_ext">Isa_btree__Isa_export.Prelude.constants_ext</a> <span class="keyword">&#8209;&gt;</span> <a href="../../../isa_btree/Isa_btree__Isa_export/Prelude/index.html#type-min_size_t">Isa_btree__Isa_export.Prelude.min_size_t</a> option <span class="keyword">&#8209;&gt;</span> (<span class="type-var">'a</span> <span class="keyword">&#8209;&gt;</span> <span class="type-var">'a</span> <span class="keyword">&#8209;&gt;</span> <a href="../../../isa_btree/Isa_btree__Isa_export/Arith/index.html#type-int">Isa_btree__Isa_export.Arith.int</a>) <span class="keyword">&#8209;&gt;</span> (<span class="type-var">'a</span>, <span class="type-var">'b</span>) <a href="index.html#type-tree">tree</a> <span class="keyword">&#8209;&gt;</span> bool</code></div><div class="doc"></div></div><div class="spec val" id="val-wellformed_tree"><a href="#val-wellformed_tree" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>wellformed_tree : constants:<a href="../../../isa_btree/Isa_btree/Constants/index.html#type-t">Isa_btree.Constants.t</a> <span class="keyword">&#8209;&gt;</span> maybe_small:<a href="../../../isa_btree/Isa_btree__Isa_export/Prelude/index.html#type-min_size_t">Isa_btree__Isa_export.Prelude.min_size_t</a> option <span class="keyword">&#8209;&gt;</span> cmp:(<span class="type-var">'a</span> <span class="keyword">&#8209;&gt;</span> <span class="type-var">'a</span> <span class="keyword">&#8209;&gt;</span> int) <span class="keyword">&#8209;&gt;</span> (<span class="type-var">'a</span>, <span class="type-var">'b</span>) <a href="index.html#type-tree">tree</a> <span class="keyword">&#8209;&gt;</span> bool</code></div><div class="doc"></div></div></details></div><div class="spec include"><div class="doc"></div><details open="open"><summary><span class="def"><code><span class="keyword">include </span><a href="../index.html#module-Frame">Frame</a></code></span></summary><div class="spec include"><div class="doc"><p>A frame is a node in a B-tree. 'k is the key type. 'v is the value
type. 'r is the type of pointers to blocks.</p></div><details open="open"><summary><span class="def"><code><span class="keyword">include </span><a href="../../../isa_btree/Isa_btree/Isa_export/index.html#module-Disk_node">Isa_btree.Isa_export.Disk_node</a></code></span></summary><div class="spec type" id="type-dnode"><a href="#type-dnode" class="anchor"></a><div class="def type"><code><span class="keyword">type </span>('a, 'b, 'c) dnode</code><code></code><code><span class="keyword"> = </span></code><table class="variant"><tr id="type-dnode.Disk_node" class="anchored"><td class="def constructor"><a href="#type-dnode.Disk_node" class="anchor"></a><code><span class="keyword">| </span></code><code><span class="constructor">Disk_node</span><span class="keyword"> of </span><span class="type-var">'a</span> list<span class="keyword"> * </span><span class="type-var">'c</span> list</code></td></tr><tr id="type-dnode.Disk_leaf" class="anchored"><td class="def constructor"><a href="#type-dnode.Disk_leaf" class="anchor"></a><code><span class="keyword">| </span></code><code><span class="constructor">Disk_leaf</span><span class="keyword"> of </span>(<span class="type-var">'a</span><span class="keyword"> * </span><span class="type-var">'b</span>) list</code></td></tr></table><code></code></div><div class="doc"></div></div><div class="spec val" id="val-dnode_to_yojson"><a href="#val-dnode_to_yojson" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>dnode_to_yojson : (<span class="type-var">'a</span> <span class="keyword">&#8209;&gt;</span> Yojson.Safe.json) <span class="keyword">&#8209;&gt;</span> (<span class="type-var">'b</span> <span class="keyword">&#8209;&gt;</span> Yojson.Safe.json) <span class="keyword">&#8209;&gt;</span> (<span class="type-var">'c</span> <span class="keyword">&#8209;&gt;</span> Yojson.Safe.json) <span class="keyword">&#8209;&gt;</span> (<span class="type-var">'a</span>, <span class="type-var">'b</span>, <span class="type-var">'c</span>) <a href="index.html#type-dnode">dnode</a> <span class="keyword">&#8209;&gt;</span> Yojson.Safe.json</code></div><div class="doc"></div></div><div class="spec val" id="val-dnode_of_yojson"><a href="#val-dnode_of_yojson" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>dnode_of_yojson : (Yojson.Safe.json <span class="keyword">&#8209;&gt;</span> <span class="type-var">'a</span> Ppx_deriving_yojson_runtime.error_or) <span class="keyword">&#8209;&gt;</span> (Yojson.Safe.json <span class="keyword">&#8209;&gt;</span> <span class="type-var">'b</span> Ppx_deriving_yojson_runtime.error_or) <span class="keyword">&#8209;&gt;</span> (Yojson.Safe.json <span class="keyword">&#8209;&gt;</span> <span class="type-var">'c</span> Ppx_deriving_yojson_runtime.error_or) <span class="keyword">&#8209;&gt;</span> Yojson.Safe.json <span class="keyword">&#8209;&gt;</span> (<span class="type-var">'a</span>, <span class="type-var">'b</span>, <span class="type-var">'c</span>) <a href="index.html#type-dnode">dnode</a> Ppx_deriving_yojson_runtime.error_or</code></div><div class="doc"></div></div><div class="spec val" id="val-mk_Disk_node"><a href="#val-mk_Disk_node" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>mk_Disk_node : (<span class="type-var">'a</span> list<span class="keyword"> * </span><span class="type-var">'b</span> list) <span class="keyword">&#8209;&gt;</span> (<span class="type-var">'a</span>, <span class="type-var">'c</span>, <span class="type-var">'b</span>) <a href="index.html#type-dnode">dnode</a></code></div><div class="doc"></div></div><div class="spec val" id="val-dest_Disk_leaf"><a href="#val-dest_Disk_leaf" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>dest_Disk_leaf : (<span class="type-var">'a</span>, <span class="type-var">'b</span>, <span class="type-var">'c</span>) <a href="index.html#type-dnode">dnode</a> <span class="keyword">&#8209;&gt;</span> (<span class="type-var">'a</span><span class="keyword"> * </span><span class="type-var">'b</span>) list</code></div><div class="doc"></div></div><div class="spec val" id="val-dest_Disk_node"><a href="#val-dest_Disk_node" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>dest_Disk_node : (<span class="type-var">'a</span>, <span class="type-var">'b</span>, <span class="type-var">'c</span>) <a href="index.html#type-dnode">dnode</a> <span class="keyword">&#8209;&gt;</span> <span class="type-var">'a</span> list<span class="keyword"> * </span><span class="type-var">'c</span> list</code></div><div class="doc"></div></div></details></div><div class="spec module" id="module-Frame_type"><a href="#module-Frame_type" class="anchor"></a><div class="def module"><code><span class="keyword">module </span>Frame_type = <a href="../Frame/index.html#module-Frame_type">Frame.Frame_type</a></code></div><div class="doc"></div></div><div class="spec include"><div class="doc"></div><details open="open"><summary><span class="def"><code><span class="keyword">include </span><a href="index.html#module-Frame_type">Frame_type</a></code></span></summary><div class="spec type" id="type-frame"><a href="#type-frame" class="anchor"></a><div class="def type"><code><span class="keyword">type </span>('k, 'v, 'r) frame</code><code><span class="keyword"> = </span>(<span class="type-var">'k</span>, <span class="type-var">'v</span>, <span class="type-var">'r</span>) <a href="../../../isa_btree/Isa_btree/Isa_export/Disk_node/index.html#type-dnode">Isa_btree.Isa_export.Disk_node.dnode</a></code><code><span class="keyword"> = </span></code><table class="variant"><tr id="type-frame.Disk_node" class="anchored"><td class="def constructor"><a href="#type-frame.Disk_node" class="anchor"></a><code><span class="keyword">| </span></code><code><span class="constructor">Disk_node</span><span class="keyword"> of </span><span class="type-var">'k</span> list<span class="keyword"> * </span><span class="type-var">'r</span> list</code></td></tr><tr id="type-frame.Disk_leaf" class="anchored"><td class="def constructor"><a href="#type-frame.Disk_leaf" class="anchor"></a><code><span class="keyword">| </span></code><code><span class="constructor">Disk_leaf</span><span class="keyword"> of </span>(<span class="type-var">'k</span><span class="keyword"> * </span><span class="type-var">'v</span>) list</code></td></tr></table><code></code></div><div class="doc"></div></div><div class="spec val" id="val-frame_to_yojson"><a href="#val-frame_to_yojson" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>frame_to_yojson : k v r. (<span class="type-var">'k</span> <span class="keyword">&#8209;&gt;</span> Yojson.Safe.json) <span class="keyword">&#8209;&gt;</span> (<span class="type-var">'v</span> <span class="keyword">&#8209;&gt;</span> Yojson.Safe.json) <span class="keyword">&#8209;&gt;</span> (<span class="type-var">'r</span> <span class="keyword">&#8209;&gt;</span> Yojson.Safe.json) <span class="keyword">&#8209;&gt;</span> (<span class="type-var">'k</span>, <span class="type-var">'v</span>, <span class="type-var">'r</span>) <a href="index.html#type-frame">frame</a> <span class="keyword">&#8209;&gt;</span> Yojson.Safe.json</code></div><div class="doc"></div></div><div class="spec val" id="val-frame_of_yojson"><a href="#val-frame_of_yojson" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>frame_of_yojson : k v r. (Yojson.Safe.json <span class="keyword">&#8209;&gt;</span> <span class="type-var">'k</span> Ppx_deriving_yojson_runtime.error_or) <span class="keyword">&#8209;&gt;</span> (Yojson.Safe.json <span class="keyword">&#8209;&gt;</span> <span class="type-var">'v</span> Ppx_deriving_yojson_runtime.error_or) <span class="keyword">&#8209;&gt;</span> (Yojson.Safe.json <span class="keyword">&#8209;&gt;</span> <span class="type-var">'r</span> Ppx_deriving_yojson_runtime.error_or) <span class="keyword">&#8209;&gt;</span> Yojson.Safe.json <span class="keyword">&#8209;&gt;</span> (<span class="type-var">'k</span>, <span class="type-var">'v</span>, <span class="type-var">'r</span>) <a href="index.html#type-frame">frame</a> Ppx_deriving_yojson_runtime.error_or</code></div><div class="doc"></div></div></details></div></details></div><div class="spec include"><div class="doc"></div><details open="open"><summary><span class="def"><code><span class="keyword">include </span><a href="../index.html#module-R2t">R2t</a></code></span></summary><div class="spec type" id="type-r2t"><a href="#type-r2t" class="anchor"></a><div class="def type"><code><span class="keyword">type </span>('k, 'v, 'r, 't) r2t</code><code><span class="keyword"> = </span><span class="type-var">'t</span> <span class="keyword">&#8209;&gt;</span> <span class="type-var">'r</span> <span class="keyword">&#8209;&gt;</span> (<span class="type-var">'k</span>, <span class="type-var">'v</span>) <a href="../Tree/index.html#type-tree">Tree.tree</a> option</code><code></code></div><div class="doc"><p>The r2t type represents a pure view of a given system state. It is
constructed as a function from system state. The result is a
function which takes a reference r and constructs the (key,value)
tree rooted at r. In case the state is not wellformed, the return
type is actually a tree option. NOTE this function takes the global
state t, not some particular store state.</p></div></div><div class="spec val" id="val-int_to_nat"><a href="#val-int_to_nat" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>int_to_nat : int <span class="keyword">&#8209;&gt;</span> <a href="../../../isa_btree/Isa_btree/Isa_export/Arith/index.html#type-nat">Isa_btree.Isa_export.Arith.nat</a></code></div><div class="doc"></div></div><div class="spec val" id="val-mk_r2t"><a href="#val-mk_r2t" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>mk_r2t : (<span class="type-var">'a</span> <span class="keyword">&#8209;&gt;</span> <span class="type-var">'b</span> <span class="keyword">&#8209;&gt;</span> (<span class="type-var">'c</span>, <span class="type-var">'d</span>, <span class="type-var">'b</span>) <a href="../../../isa_btree/Isa_btree__Isa_export/Disk_node/index.html#type-dnode">Isa_btree__Isa_export.Disk_node.dnode</a> option) <span class="keyword">&#8209;&gt;</span> <span class="type-var">'a</span> <span class="keyword">&#8209;&gt;</span> <span class="type-var">'b</span> <span class="keyword">&#8209;&gt;</span> (<span class="type-var">'c</span>, <span class="type-var">'d</span>) <a href="../../../isa_btree/Isa_btree__Isa_export/Tree/index.html#type-tree">Isa_btree__Isa_export.Tree.tree</a> option</code></div><div class="doc"></div></div><div class="spec val" id="val-store_read_to_r2t"><a href="#val-store_read_to_r2t" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>store_read_to_r2t : run:(<span class="type-var">'a</span> <span class="keyword">&#8209;&gt;</span> <span class="type-var">'b</span> <span class="keyword">&#8209;&gt;</span> <span class="type-var">'c</span><span class="keyword"> * </span>(<span class="type-var">'d</span>, <span class="type-var">'e</span>, <span class="type-var">'f</span>) <a href="../Frame/index.html#type-frame">Frame.frame</a>) <span class="keyword">&#8209;&gt;</span> store_read:(<span class="type-var">'f</span> <span class="keyword">&#8209;&gt;</span> <span class="type-var">'b</span>) <span class="keyword">&#8209;&gt;</span> <span class="type-var">'a</span> <span class="keyword">&#8209;&gt;</span> <span class="type-var">'f</span> <span class="keyword">&#8209;&gt;</span> (<span class="type-var">'d</span>, <span class="type-var">'e</span>) <a href="../../../isa_btree/Isa_btree__Isa_export/Tree/index.html#type-tree">Isa_btree__Isa_export.Tree.tree</a> option</code></div><div class="doc"></div></div></details></div><div class="spec include"><div class="doc"></div><details open="open"><summary><span class="def"><code><span class="keyword">include </span><a href="../../../tjr_monad/Tjr_monad/index.html#module-Types">Tjr_monad.Types</a></code></span></summary><div class="spec include"><div class="doc"></div><details open="open"><summary><span class="def"><code><span class="keyword">include </span><a href="../../../tjr_monad/Tjr_monad/index.html#module-Monad_ops">Tjr_monad.Monad_ops</a></code></span></summary><p>Use a phantom type variable 't to specialize monad ops to a
particular monad</p><div class="spec type" id="type-m"><a href="#type-m" class="anchor"></a><div class="def type"><code><span class="keyword">type </span>('a, 't) m</code><code></code><code></code></div><div class="doc"></div></div><div class="spec type" id="type-monad_ops"><a href="#type-monad_ops" class="anchor"></a><div class="def type"><code><span class="keyword">type </span>'t monad_ops</code><code></code><code><span class="keyword"> = </span></code><code>{</code><table class="record"><tr id="type-monad_ops.return" class="anchored"><td class="def field"><a href="#type-monad_ops.return" class="anchor"></a><code>return : a. <span class="type-var">'a</span> <span class="keyword">&#8209;&gt;</span> (<span class="type-var">'a</span>, <span class="type-var">'t</span>) <a href="index.html#type-m">m</a>;</code></td></tr><tr id="type-monad_ops.bind" class="anchored"><td class="def field"><a href="#type-monad_ops.bind" class="anchor"></a><code>bind : a b. (<span class="type-var">'a</span>, <span class="type-var">'t</span>) <a href="index.html#type-m">m</a> <span class="keyword">&#8209;&gt;</span> (<span class="type-var">'a</span> <span class="keyword">&#8209;&gt;</span> (<span class="type-var">'b</span>, <span class="type-var">'t</span>) <a href="index.html#type-m">m</a>) <span class="keyword">&#8209;&gt;</span> (<span class="type-var">'b</span>, <span class="type-var">'t</span>) <a href="index.html#type-m">m</a>;</code></td></tr></table><code>}</code><code></code></div><div class="doc"></div></div></details></div><div class="spec include"><div class="doc"></div><details open="open"><summary><span class="def"><code><span class="keyword">include </span><a href="../../../tjr_monad/Tjr_monad/index.html#module-Event">Tjr_monad.Event</a></code></span></summary><div class="spec type" id="type-event"><a href="#type-event" class="anchor"></a><div class="def type"><code><span class="keyword">type </span>'a event</code><code></code><code></code></div><div class="doc"><p>The type of events that resolve to <code class="code">'a</code></p></div></div><div class="spec type" id="type-event_ops"><a href="#type-event_ops" class="anchor"></a><div class="def type"><code><span class="keyword">type </span>'t event_ops</code><code></code><code><span class="keyword"> = </span></code><code>{</code><table class="record"><tr id="type-event_ops.ev_create" class="anchored"><td class="def field"><a href="#type-event_ops.ev_create" class="anchor"></a><code>ev_create : a. unit <span class="keyword">&#8209;&gt;</span> (<span class="type-var">'a</span> <a href="index.html#type-event">event</a>, <span class="type-var">'t</span>) <a href="../../../tjr_monad/Tjr_monad/Monad_ops/index.html#type-m">Tjr_monad.Monad_ops.m</a>;</code></td></tr><tr id="type-event_ops.ev_wait" class="anchored"><td class="def field"><a href="#type-event_ops.ev_wait" class="anchor"></a><code>ev_wait : a. <span class="type-var">'a</span> <a href="index.html#type-event">event</a> <span class="keyword">&#8209;&gt;</span> (<span class="type-var">'a</span>, <span class="type-var">'t</span>) <a href="../../../tjr_monad/Tjr_monad/Monad_ops/index.html#type-m">Tjr_monad.Monad_ops.m</a>;</code></td></tr><tr id="type-event_ops.ev_signal" class="anchored"><td class="def field"><a href="#type-event_ops.ev_signal" class="anchor"></a><code>ev_signal : a. <span class="type-var">'a</span> <a href="index.html#type-event">event</a> <span class="keyword">&#8209;&gt;</span> <span class="type-var">'a</span> <span class="keyword">&#8209;&gt;</span> (unit, <span class="type-var">'t</span>) <a href="../../../tjr_monad/Tjr_monad/Monad_ops/index.html#type-m">Tjr_monad.Monad_ops.m</a>;</code></td></tr></table><code>}</code><code></code></div><div class="doc"><p>Multiple threads can be waiting on an event. Only one thread
should signal the event. It is an error to signal the same event
more than once. If this happens, the new signalled value is
discarded and no further actions are taken. FIXME perhaps we should
throw an exception or something. An event is a bit like a channel
that multiple readers can register on (and all will receive any
msgs), and which only carries at most one msg.</p><p>NOTE lwt has two types, <code class="code">'a t</code> for promises and <code class="code">'a u</code> for
resolvers. These are implemented using the same underlying
structure.</p></div></div></details></div><div class="spec include"><div class="doc"></div><details open="open"><summary><span class="def"><code><span class="keyword">include </span><a href="../../../tjr_monad/Tjr_monad/index.html#module-With_state">Tjr_monad.With_state</a></code></span></summary><div class="spec type" id="type-with_state"><a href="#type-with_state" class="anchor"></a><div class="def type"><code><span class="keyword">type </span>('s, 't) with_state</code><code></code><code><span class="keyword"> = </span></code><code>{</code><table class="record"><tr id="type-with_state.with_state" class="anchored"><td class="def field"><a href="#type-with_state.with_state" class="anchor"></a><code>with_state : a. (state:<span class="type-var">'s</span> <span class="keyword">&#8209;&gt;</span> set_state:(<span class="type-var">'s</span> <span class="keyword">&#8209;&gt;</span> (unit, <span class="type-var">'t</span>) <a href="../../../tjr_monad/Tjr_monad/Monad_ops/index.html#type-m">Tjr_monad.Monad_ops.m</a>) <span class="keyword">&#8209;&gt;</span> (<span class="type-var">'a</span>, <span class="type-var">'t</span>) <a href="../../../tjr_monad/Tjr_monad/Monad_ops/index.html#type-m">Tjr_monad.Monad_ops.m</a>) <span class="keyword">&#8209;&gt;</span> (<span class="type-var">'a</span>, <span class="type-var">'t</span>) <a href="../../../tjr_monad/Tjr_monad/Monad_ops/index.html#type-m">Tjr_monad.Monad_ops.m</a>;</code></td></tr></table><code>}</code><code></code></div><div class="doc"><p>A type to allow parameterization over a generic notion of &quot;part of
state&quot;. Presumably the part of the state is locked while the
monadic operation completes, and then the lock is released.</p></div></div></details></div></details></div><div class="spec include"><div class="doc"></div><details open="open"><summary><span class="def"><code><span class="keyword">include </span><a href="../../../tjr_monad/Tjr_monad/index.html#module-Mref">Tjr_monad.Mref</a></code></span></summary><div class="spec type" id="type-mref"><a href="#type-mref" class="anchor"></a><div class="def type"><code><span class="keyword">type </span>('a, 's) mref</code><code></code><code><span class="keyword"> = </span></code><code>{</code><table class="record"><tr id="type-mref.get" class="anchored"><td class="def field"><a href="#type-mref.get" class="anchor"></a><code>get : unit <span class="keyword">&#8209;&gt;</span> (<span class="type-var">'a</span>, <span class="type-var">'s</span>) <a href="../../../tjr_monad/Tjr_monad/Monad_ops/index.html#type-m">Tjr_monad.Monad_ops.m</a>;</code></td></tr><tr id="type-mref.set" class="anchored"><td class="def field"><a href="#type-mref.set" class="anchor"></a><code>set : <span class="type-var">'a</span> <span class="keyword">&#8209;&gt;</span> (unit, <span class="type-var">'s</span>) <a href="../../../tjr_monad/Tjr_monad/Monad_ops/index.html#type-m">Tjr_monad.Monad_ops.m</a>;</code></td></tr></table><code>}</code><code></code></div><div class="doc"><p>Monadic reference operations (deprecated)</p></div></div></details></div></body></html>