<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Tjr_btree__Base_types (tjr_btree.Tjr_btree__Base_types)</title><link rel="stylesheet" href="../../odoc.css"/><meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div class="content"><header><nav><a href="../index.html">Up</a> – <a href="../index.html">tjr_btree</a> &#x00BB; Tjr_btree__Base_types</nav><h1>Module <code>Tjr_btree__Base_types</code></h1><p>Collect base types together with sensible names</p></header><div><div class="spec include"><div class="doc"><details open="open"><summary><span class="def"><code><span class="keyword">include </span><a href="../../tjr_fs_shared/Tjr_fs_shared/index.html">Tjr_fs_shared</a></code></span></summary><dl><dt class="spec module" id="module-Blk_dev_in_mem"><a href="#module-Blk_dev_in_mem" class="anchor"></a><code><span class="keyword">module </span><a href="Blk_dev_in_mem/index.html">Blk_dev_in_mem</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></dt><dd></dd></dl><dl><dt class="spec module" id="module-Blk_dev_on_fd"><a href="#module-Blk_dev_on_fd" class="anchor"></a><code><span class="keyword">module </span><a href="Blk_dev_on_fd/index.html">Blk_dev_on_fd</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></dt><dd></dd></dl><dl><dt class="spec module" id="module-Blk_dev_ops_type"><a href="#module-Blk_dev_ops_type" class="anchor"></a><code><span class="keyword">module </span><a href="Blk_dev_ops_type/index.html">Blk_dev_ops_type</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></dt><dd></dd></dl><dl><dt class="spec module" id="module-Blk_sz_type"><a href="#module-Blk_sz_type" class="anchor"></a><code><span class="keyword">module </span><a href="Blk_sz_type/index.html">Blk_sz_type</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></dt><dd></dd></dl><dl><dt class="spec module" id="module-Block_ops"><a href="#module-Block_ops" class="anchor"></a><code><span class="keyword">module </span><a href="Block_ops/index.html">Block_ops</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></dt><dd></dd></dl><dl><dt class="spec module" id="module-Block_ops_type"><a href="#module-Block_ops_type" class="anchor"></a><code><span class="keyword">module </span><a href="Block_ops_type/index.html">Block_ops_type</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></dt><dd></dd></dl><dl><dt class="spec module" id="module-File_util"><a href="#module-File_util" class="anchor"></a><code><span class="keyword">module </span><a href="File_util/index.html">File_util</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></dt><dd></dd></dl><dl><dt class="spec module" id="module-Global"><a href="#module-Global" class="anchor"></a><code><span class="keyword">module </span><a href="Global/index.html">Global</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></dt><dd></dd></dl><dl><dt class="spec module" id="module-Kv_op"><a href="#module-Kv_op" class="anchor"></a><code><span class="keyword">module </span><a href="Kv_op/index.html">Kv_op</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></dt><dd></dd></dl><dl><dt class="spec module" id="module-Kv_op_type"><a href="#module-Kv_op_type" class="anchor"></a><code><span class="keyword">module </span><a href="Kv_op_type/index.html">Kv_op_type</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></dt><dd></dd></dl><dl><dt class="spec module" id="module-Logger"><a href="#module-Logger" class="anchor"></a><code><span class="keyword">module </span><a href="Logger/index.html">Logger</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></dt><dd></dd></dl><dl><dt class="spec module" id="module-Map_ops"><a href="#module-Map_ops" class="anchor"></a><code><span class="keyword">module </span><a href="Map_ops/index.html">Map_ops</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></dt><dd></dd></dl><dl><dt class="spec module" id="module-Map_ops_type"><a href="#module-Map_ops_type" class="anchor"></a><code><span class="keyword">module </span><a href="Map_ops_type/index.html">Map_ops_type</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></dt><dd></dd></dl><dl><dt class="spec module" id="module-Small_string"><a href="#module-Small_string" class="anchor"></a><code><span class="keyword">module </span><a href="Small_string/index.html">Small_string</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></dt><dd></dd></dl><dl><dt class="spec module" id="module-Store_passing"><a href="#module-Store_passing" class="anchor"></a><code><span class="keyword">module </span><a href="Store_passing/index.html">Store_passing</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></dt><dd></dd></dl><dl><dt class="spec module" id="module-Test"><a href="#module-Test" class="anchor"></a><code><span class="keyword">module </span><a href="Test/index.html">Test</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></dt><dd></dd></dl><dl><dt class="spec module" id="module-Tjr_fs_shared_doc"><a href="#module-Tjr_fs_shared_doc" class="anchor"></a><code><span class="keyword">module </span><a href="Tjr_fs_shared_doc/index.html">Tjr_fs_shared_doc</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></dt><dd></dd></dl></details></div></div></div><div><div class="spec include"><div class="doc"><details open="open"><summary><span class="def"><code><span class="keyword">include </span><a href="../Tjr_btree/index.html#module-Internal_base_types_pervasives">Tjr_btree.Internal_base_types_pervasives</a></code></span></summary><aside></aside><aside><p>Common types and definitions.</p></aside><dl><dt class="spec type" id="type-res"><a href="#type-res" class="anchor"></a><code><span class="keyword">type </span>'a res</code><code><span class="keyword"> = </span><span class="type-var">'a</span> <a href="../../isa_btree/Isa_btree/Isa_export/Util/index.html#type-res">Isa_btree.Isa_export.Util.res</a></code></dt><dd><p>The result type. <code>'a res</code> is equal to <code>Ok of 'a | Error of string</code></p></dd></dl><dl><dt class="spec value" id="val-option_map"><a href="#val-option_map" class="anchor"></a><code><span class="keyword">val </span>option_map : (<span class="type-var">'a</span> <span>&#45;&gt;</span> <span class="type-var">'b</span>) <span>&#45;&gt;</span> <span class="type-var">'a</span> option <span>&#45;&gt;</span> <span class="type-var">'b</span> option</code></dt><dt class="spec value" id="val-dest_Some"><a href="#val-dest_Some" class="anchor"></a><code><span class="keyword">val </span>dest_Some : <span class="type-var">'a</span> option <span>&#45;&gt;</span> <span class="type-var">'a</span></code></dt><dt class="spec value" id="val-is_None"><a href="#val-is_None" class="anchor"></a><code><span class="keyword">val </span>is_None : <span class="type-var">'a</span> option <span>&#45;&gt;</span> bool</code></dt><dt class="spec value" id="val-is_Some"><a href="#val-is_Some" class="anchor"></a><code><span class="keyword">val </span>is_Some : <span class="type-var">'a</span> option <span>&#45;&gt;</span> bool</code></dt><dt class="spec value" id="val-impossible"><a href="#val-impossible" class="anchor"></a><code><span class="keyword">val </span>impossible : string <span>&#45;&gt;</span> <span class="type-var">'a</span></code></dt><dd><p>A synonym for <code>failwith</code>, used to mark supposedly impossible situations. Should never be called.</p></dd></dl><dl><dt class="spec value" id="val-flush_out"><a href="#val-flush_out" class="anchor"></a><code><span class="keyword">val </span>flush_out : unit <span>&#45;&gt;</span> unit</code></dt></dl></details></div></div></div><div><div class="spec include"><div class="doc"><details open="open"><summary><span class="def"><code><span class="keyword">include </span><a href="../Tjr_btree/index.html#module-Tree">Tjr_btree.Tree</a></code></span></summary><aside></aside><aside><p>The B-tree tree type.</p></aside><div><div class="spec include"><div class="doc"><details open="open"><summary><span class="def"><code><span class="keyword">include </span><a href="../../isa_btree/Isa_btree/Isa_export/index.html#module-Tree">Isa_btree.Isa_export.Tree</a></code></span></summary><dl><dt class="spec type" id="type-tree"><a href="#type-tree" class="anchor"></a><code><span class="keyword">type </span>('a, 'b) tree</code><code><span class="keyword"> = </span></code><table class="variant"><tr id="type-tree.Node" class="anchored"><td class="def constructor"><a href="#type-tree.Node" class="anchor"></a><code><span class="keyword">| </span></code><code><span class="constructor">Node</span><span class="keyword"> of </span><span class="type-var">'a</span> list<span class="keyword"> * </span>(<span class="type-var">'a</span>, <span class="type-var">'b</span>) <a href="index.html#type-tree">tree</a> list</code></td></tr><tr id="type-tree.Leaf" class="anchored"><td class="def constructor"><a href="#type-tree.Leaf" class="anchor"></a><code><span class="keyword">| </span></code><code><span class="constructor">Leaf</span><span class="keyword"> of </span>(<span class="type-var">'a</span><span class="keyword"> * </span><span class="type-var">'b</span>) list</code></td></tr></table></dt></dl><dl><dt class="spec value" id="val-tree_to_yojson"><a href="#val-tree_to_yojson" class="anchor"></a><code><span class="keyword">val </span>tree_to_yojson : (<span class="type-var">'a</span> <span>&#45;&gt;</span> Yojson.Safe.json) <span>&#45;&gt;</span> (<span class="type-var">'b</span> <span>&#45;&gt;</span> Yojson.Safe.json) <span>&#45;&gt;</span> (<span class="type-var">'a</span>, <span class="type-var">'b</span>) <a href="index.html#type-tree">tree</a> <span>&#45;&gt;</span> Yojson.Safe.json</code></dt><dt class="spec value" id="val-tree_of_yojson"><a href="#val-tree_of_yojson" class="anchor"></a><code><span class="keyword">val </span>tree_of_yojson : (Yojson.Safe.json <span>&#45;&gt;</span> <span class="type-var">'a</span> Ppx_deriving_yojson_runtime.error_or) <span>&#45;&gt;</span> (Yojson.Safe.json <span>&#45;&gt;</span> <span class="type-var">'b</span> Ppx_deriving_yojson_runtime.error_or) <span>&#45;&gt;</span> Yojson.Safe.json <span>&#45;&gt;</span> (<span class="type-var">'a</span>, <span class="type-var">'b</span>) <a href="index.html#type-tree">tree</a> Ppx_deriving_yojson_runtime.error_or</code></dt><dt class="spec value" id="val-height"><a href="#val-height" class="anchor"></a><code><span class="keyword">val </span>height : (<span class="type-var">'a</span>, <span class="type-var">'b</span>) <a href="index.html#type-tree">tree</a> <span>&#45;&gt;</span> <a href="../../isa_btree/Isa_btree/Isa_export/Arith/index.html#type-nat">Isa_btree.Isa_export.Arith.nat</a></code></dt><dt class="spec value" id="val-dest_Node"><a href="#val-dest_Node" class="anchor"></a><code><span class="keyword">val </span>dest_Node : (<span class="type-var">'a</span>, <span class="type-var">'b</span>) <a href="index.html#type-tree">tree</a> <span>&#45;&gt;</span> <span class="type-var">'a</span> list<span class="keyword"> * </span>(<span class="type-var">'a</span>, <span class="type-var">'b</span>) <a href="index.html#type-tree">tree</a> list</code></dt><dt class="spec value" id="val-tree_equal"><a href="#val-tree_equal" class="anchor"></a><code><span class="keyword">val </span>tree_equal : (<span class="type-var">'a</span>, <span class="type-var">'b</span>) <a href="index.html#type-tree">tree</a> <span>&#45;&gt;</span> (<span class="type-var">'a</span>, <span class="type-var">'b</span>) <a href="index.html#type-tree">tree</a> <span>&#45;&gt;</span> bool</code></dt><dt class="spec value" id="val-tree_to_leaves"><a href="#val-tree_to_leaves" class="anchor"></a><code><span class="keyword">val </span>tree_to_leaves : (<span class="type-var">'a</span>, <span class="type-var">'b</span>) <a href="index.html#type-tree">tree</a> <span>&#45;&gt;</span> (<span class="type-var">'a</span><span class="keyword"> * </span><span class="type-var">'b</span>) list list</code></dt><dt class="spec value" id="val-tree_to_kvs"><a href="#val-tree_to_kvs" class="anchor"></a><code><span class="keyword">val </span>tree_to_kvs : (<span class="type-var">'a</span>, <span class="type-var">'b</span>) <a href="index.html#type-tree">tree</a> <span>&#45;&gt;</span> (<span class="type-var">'a</span><span class="keyword"> * </span><span class="type-var">'b</span>) list</code></dt><dt class="spec value" id="val-tree_to_keys"><a href="#val-tree_to_keys" class="anchor"></a><code><span class="keyword">val </span>tree_to_keys : (<span class="type-var">'a</span>, <span class="type-var">'b</span>) <a href="index.html#type-tree">tree</a> <span>&#45;&gt;</span> <span class="type-var">'a</span> <a href="../../isa_btree/Isa_btree/Isa_export/Set/index.html#type-set">Isa_btree.Isa_export.Set.set</a></code></dt><dt class="spec value" id="val-wellformed_tree"><a href="#val-wellformed_tree" class="anchor"></a><code><span class="keyword">val </span>wellformed_tree : unit <a href="../../isa_btree/Isa_btree/Isa_export/Prelude/index.html#type-constants_ext">Isa_btree.Isa_export.Prelude.constants_ext</a> <span>&#45;&gt;</span> <a href="../../isa_btree/Isa_btree/Isa_export/Prelude/index.html#type-min_size_t">Isa_btree.Isa_export.Prelude.min_size_t</a> option <span>&#45;&gt;</span> (<span class="type-var">'a</span> <span>&#45;&gt;</span> <span class="type-var">'a</span> <span>&#45;&gt;</span> <a href="../../isa_btree/Isa_btree/Isa_export/Arith/index.html#type-int">Isa_btree.Isa_export.Arith.int</a>) <span>&#45;&gt;</span> (<span class="type-var">'a</span>, <span class="type-var">'b</span>) <a href="index.html#type-tree">tree</a> <span>&#45;&gt;</span> bool</code></dt></dl></details></div></div></div><div class="spec module" id="module-Tree_type"><a href="#module-Tree_type" class="anchor"></a><code><span class="keyword">module </span>Tree_type = <a href="../Tjr_btree/Tree/index.html#module-Tree_type">Tjr_btree.Tree.Tree_type</a></code></div><dl><dt class="spec value" id="val-wellformed_tree'"><a href="#val-wellformed_tree'" class="anchor"></a><code><span class="keyword">val </span>wellformed_tree' : unit <a href="../../isa_btree/Isa_btree__Isa_export/Prelude/index.html#type-constants_ext">Isa_btree__Isa_export.Prelude.constants_ext</a> <span>&#45;&gt;</span> <a href="../../isa_btree/Isa_btree__Isa_export/Prelude/index.html#type-min_size_t">Isa_btree__Isa_export.Prelude.min_size_t</a> option <span>&#45;&gt;</span> (<span class="type-var">'a</span> <span>&#45;&gt;</span> <span class="type-var">'a</span> <span>&#45;&gt;</span> <a href="../../isa_btree/Isa_btree__Isa_export/Arith/index.html#type-int">Isa_btree__Isa_export.Arith.int</a>) <span>&#45;&gt;</span> (<span class="type-var">'a</span>, <span class="type-var">'b</span>) <a href="index.html#type-tree">tree</a> <span>&#45;&gt;</span> bool</code></dt><dt class="spec value" id="val-wellformed_tree"><a href="#val-wellformed_tree" class="anchor"></a><code><span class="keyword">val </span>wellformed_tree : constants:<a href="../../isa_btree/Isa_btree/Constants/index.html#type-t">Isa_btree.Constants.t</a> <span>&#45;&gt;</span> maybe_small:<a href="../../isa_btree/Isa_btree__Isa_export/Prelude/index.html#type-min_size_t">Isa_btree__Isa_export.Prelude.min_size_t</a> option <span>&#45;&gt;</span> cmp:(<span class="type-var">'a</span> <span>&#45;&gt;</span> <span class="type-var">'a</span> <span>&#45;&gt;</span> int) <span>&#45;&gt;</span> (<span class="type-var">'a</span>, <span class="type-var">'b</span>) <a href="index.html#type-tree">tree</a> <span>&#45;&gt;</span> bool</code></dt></dl></details></div></div></div><div><div class="spec include"><div class="doc"><details open="open"><summary><span class="def"><code><span class="keyword">include </span><a href="../Tjr_btree/index.html#module-Frame">Tjr_btree.Frame</a></code></span></summary><aside></aside><div><div class="spec include"><div class="doc"><p>A frame is a node in a B-tree. 'k is the key type. 'v is the value type. 'r is the type of pointers to blocks.</p><details open="open"><summary><span class="def"><code><span class="keyword">include </span><a href="../../isa_btree/Isa_btree/Isa_export/index.html#module-Disk_node">Isa_btree.Isa_export.Disk_node</a></code></span></summary><dl><dt class="spec type" id="type-dnode"><a href="#type-dnode" class="anchor"></a><code><span class="keyword">type </span>('a, 'b, 'c) dnode</code><code><span class="keyword"> = </span></code><table class="variant"><tr id="type-dnode.Disk_node" class="anchored"><td class="def constructor"><a href="#type-dnode.Disk_node" class="anchor"></a><code><span class="keyword">| </span></code><code><span class="constructor">Disk_node</span><span class="keyword"> of </span><span class="type-var">'a</span> list<span class="keyword"> * </span><span class="type-var">'c</span> list</code></td></tr><tr id="type-dnode.Disk_leaf" class="anchored"><td class="def constructor"><a href="#type-dnode.Disk_leaf" class="anchor"></a><code><span class="keyword">| </span></code><code><span class="constructor">Disk_leaf</span><span class="keyword"> of </span>(<span class="type-var">'a</span><span class="keyword"> * </span><span class="type-var">'b</span>) list</code></td></tr></table></dt></dl><dl><dt class="spec value" id="val-dnode_to_yojson"><a href="#val-dnode_to_yojson" class="anchor"></a><code><span class="keyword">val </span>dnode_to_yojson : (<span class="type-var">'a</span> <span>&#45;&gt;</span> Yojson.Safe.json) <span>&#45;&gt;</span> (<span class="type-var">'b</span> <span>&#45;&gt;</span> Yojson.Safe.json) <span>&#45;&gt;</span> (<span class="type-var">'c</span> <span>&#45;&gt;</span> Yojson.Safe.json) <span>&#45;&gt;</span> (<span class="type-var">'a</span>, <span class="type-var">'b</span>, <span class="type-var">'c</span>) <a href="index.html#type-dnode">dnode</a> <span>&#45;&gt;</span> Yojson.Safe.json</code></dt><dt class="spec value" id="val-dnode_of_yojson"><a href="#val-dnode_of_yojson" class="anchor"></a><code><span class="keyword">val </span>dnode_of_yojson : (Yojson.Safe.json <span>&#45;&gt;</span> <span class="type-var">'a</span> Ppx_deriving_yojson_runtime.error_or) <span>&#45;&gt;</span> (Yojson.Safe.json <span>&#45;&gt;</span> <span class="type-var">'b</span> Ppx_deriving_yojson_runtime.error_or) <span>&#45;&gt;</span> (Yojson.Safe.json <span>&#45;&gt;</span> <span class="type-var">'c</span> Ppx_deriving_yojson_runtime.error_or) <span>&#45;&gt;</span> Yojson.Safe.json <span>&#45;&gt;</span> (<span class="type-var">'a</span>, <span class="type-var">'b</span>, <span class="type-var">'c</span>) <a href="index.html#type-dnode">dnode</a> Ppx_deriving_yojson_runtime.error_or</code></dt><dt class="spec value" id="val-mk_Disk_node"><a href="#val-mk_Disk_node" class="anchor"></a><code><span class="keyword">val </span>mk_Disk_node : (<span class="type-var">'a</span> list<span class="keyword"> * </span><span class="type-var">'b</span> list) <span>&#45;&gt;</span> (<span class="type-var">'a</span>, <span class="type-var">'c</span>, <span class="type-var">'b</span>) <a href="index.html#type-dnode">dnode</a></code></dt><dt class="spec value" id="val-dest_Disk_leaf"><a href="#val-dest_Disk_leaf" class="anchor"></a><code><span class="keyword">val </span>dest_Disk_leaf : (<span class="type-var">'a</span>, <span class="type-var">'b</span>, <span class="type-var">'c</span>) <a href="index.html#type-dnode">dnode</a> <span>&#45;&gt;</span> (<span class="type-var">'a</span><span class="keyword"> * </span><span class="type-var">'b</span>) list</code></dt><dt class="spec value" id="val-dest_Disk_node"><a href="#val-dest_Disk_node" class="anchor"></a><code><span class="keyword">val </span>dest_Disk_node : (<span class="type-var">'a</span>, <span class="type-var">'b</span>, <span class="type-var">'c</span>) <a href="index.html#type-dnode">dnode</a> <span>&#45;&gt;</span> <span class="type-var">'a</span> list<span class="keyword"> * </span><span class="type-var">'c</span> list</code></dt></dl></details></div></div></div><div class="spec module" id="module-Frame_type"><a href="#module-Frame_type" class="anchor"></a><code><span class="keyword">module </span>Frame_type = <a href="../Tjr_btree/Frame/index.html#module-Frame_type">Tjr_btree.Frame.Frame_type</a></code></div><div><div class="spec include"><div class="doc"><details open="open"><summary><span class="def"><code><span class="keyword">include </span><a href="index.html#module-Frame_type">Frame_type</a></code></span></summary><dl><dt class="spec type" id="type-frame"><a href="#type-frame" class="anchor"></a><code><span class="keyword">type </span>('k, 'v, 'r) frame</code><code><span class="keyword"> = </span>(<span class="type-var">'k</span>, <span class="type-var">'v</span>, <span class="type-var">'r</span>) <a href="../../isa_btree/Isa_btree/Isa_export/Disk_node/index.html#type-dnode">Isa_btree.Isa_export.Disk_node.dnode</a></code><code><span class="keyword"> = </span></code><table class="variant"><tr id="type-frame.Disk_node" class="anchored"><td class="def constructor"><a href="#type-frame.Disk_node" class="anchor"></a><code><span class="keyword">| </span></code><code><span class="constructor">Disk_node</span><span class="keyword"> of </span><span class="type-var">'k</span> list<span class="keyword"> * </span><span class="type-var">'r</span> list</code></td></tr><tr id="type-frame.Disk_leaf" class="anchored"><td class="def constructor"><a href="#type-frame.Disk_leaf" class="anchor"></a><code><span class="keyword">| </span></code><code><span class="constructor">Disk_leaf</span><span class="keyword"> of </span>(<span class="type-var">'k</span><span class="keyword"> * </span><span class="type-var">'v</span>) list</code></td></tr></table></dt></dl><dl><dt class="spec value" id="val-frame_to_yojson"><a href="#val-frame_to_yojson" class="anchor"></a><code><span class="keyword">val </span>frame_to_yojson : k v r. (<span class="type-var">'k</span> <span>&#45;&gt;</span> Yojson.Safe.json) <span>&#45;&gt;</span> (<span class="type-var">'v</span> <span>&#45;&gt;</span> Yojson.Safe.json) <span>&#45;&gt;</span> (<span class="type-var">'r</span> <span>&#45;&gt;</span> Yojson.Safe.json) <span>&#45;&gt;</span> (<span class="type-var">'k</span>, <span class="type-var">'v</span>, <span class="type-var">'r</span>) <a href="index.html#type-frame">frame</a> <span>&#45;&gt;</span> Yojson.Safe.json</code></dt><dt class="spec value" id="val-frame_of_yojson"><a href="#val-frame_of_yojson" class="anchor"></a><code><span class="keyword">val </span>frame_of_yojson : k v r. (Yojson.Safe.json <span>&#45;&gt;</span> <span class="type-var">'k</span> Ppx_deriving_yojson_runtime.error_or) <span>&#45;&gt;</span> (Yojson.Safe.json <span>&#45;&gt;</span> <span class="type-var">'v</span> Ppx_deriving_yojson_runtime.error_or) <span>&#45;&gt;</span> (Yojson.Safe.json <span>&#45;&gt;</span> <span class="type-var">'r</span> Ppx_deriving_yojson_runtime.error_or) <span>&#45;&gt;</span> Yojson.Safe.json <span>&#45;&gt;</span> (<span class="type-var">'k</span>, <span class="type-var">'v</span>, <span class="type-var">'r</span>) <a href="index.html#type-frame">frame</a> Ppx_deriving_yojson_runtime.error_or</code></dt></dl></details></div></div></div></details></div></div></div><div><div class="spec include"><div class="doc"><details open="open"><summary><span class="def"><code><span class="keyword">include </span><a href="../Tjr_btree/index.html#module-R2t">Tjr_btree.R2t</a></code></span></summary><aside></aside><dl><dt class="spec type" id="type-r2t"><a href="#type-r2t" class="anchor"></a><code><span class="keyword">type </span>('k, 'v, 'r, 't) r2t</code><code><span class="keyword"> = </span><span class="type-var">'t</span> <span>&#45;&gt;</span> <span class="type-var">'r</span> <span>&#45;&gt;</span> (<span class="type-var">'k</span>, <span class="type-var">'v</span>) <a href="../Tjr_btree/Tree/index.html#type-tree">Tjr_btree.Tree.tree</a> option</code></dt><dd><p>The r2t type represents a pure view of a given system state. It is constructed as a function from system state. The result is a function which takes a reference r and constructs the (key,value) tree rooted at r. In case the state is not wellformed, the return type is actually a tree option. NOTE this function takes the global state t, not some particular store state.</p></dd></dl><dl><dt class="spec value" id="val-int_to_nat"><a href="#val-int_to_nat" class="anchor"></a><code><span class="keyword">val </span>int_to_nat : int <span>&#45;&gt;</span> <a href="../../isa_btree/Isa_btree/Isa_export/Arith/index.html#type-nat">Isa_btree.Isa_export.Arith.nat</a></code></dt><dt class="spec value" id="val-mk_r2t"><a href="#val-mk_r2t" class="anchor"></a><code><span class="keyword">val </span>mk_r2t : (<span class="type-var">'a</span> <span>&#45;&gt;</span> <span class="type-var">'b</span> <span>&#45;&gt;</span> (<span class="type-var">'c</span>, <span class="type-var">'d</span>, <span class="type-var">'b</span>) <a href="../../isa_btree/Isa_btree__Isa_export/Disk_node/index.html#type-dnode">Isa_btree__Isa_export.Disk_node.dnode</a> option) <span>&#45;&gt;</span> <span class="type-var">'a</span> <span>&#45;&gt;</span> <span class="type-var">'b</span> <span>&#45;&gt;</span> (<span class="type-var">'c</span>, <span class="type-var">'d</span>) <a href="../../isa_btree/Isa_btree__Isa_export/Tree/index.html#type-tree">Isa_btree__Isa_export.Tree.tree</a> option</code></dt><dt class="spec value" id="val-store_read_to_r2t"><a href="#val-store_read_to_r2t" class="anchor"></a><code><span class="keyword">val </span>store_read_to_r2t : run:(<span class="type-var">'a</span> <span>&#45;&gt;</span> <span class="type-var">'b</span> <span>&#45;&gt;</span> <span class="type-var">'c</span><span class="keyword"> * </span>(<span class="type-var">'d</span>, <span class="type-var">'e</span>, <span class="type-var">'f</span>) <a href="../Tjr_btree/Frame/index.html#type-frame">Tjr_btree.Frame.frame</a>) <span>&#45;&gt;</span> store_read:(<span class="type-var">'f</span> <span>&#45;&gt;</span> <span class="type-var">'b</span>) <span>&#45;&gt;</span> <span class="type-var">'a</span> <span>&#45;&gt;</span> <span class="type-var">'f</span> <span>&#45;&gt;</span> (<span class="type-var">'d</span>, <span class="type-var">'e</span>) <a href="../../isa_btree/Isa_btree__Isa_export/Tree/index.html#type-tree">Isa_btree__Isa_export.Tree.tree</a> option</code></dt></dl></details></div></div></div><div><div class="spec include"><div class="doc"><details open="open"><summary><span class="def"><code><span class="keyword">include </span><a href="../../tjr_monad/Tjr_monad/index.html#module-Types">Tjr_monad.Types</a></code></span></summary><aside></aside><div><div class="spec include"><div class="doc"><details open="open"><summary><span class="def"><code><span class="keyword">include </span><a href="../../tjr_monad/Tjr_monad/index.html#module-Monad_ops">Tjr_monad.Monad_ops</a></code></span></summary><aside></aside><aside><p>Use a phantom type variable 't to specialize monad ops to a particular monad</p></aside><dl><dt class="spec type" id="type-m"><a href="#type-m" class="anchor"></a><code><span class="keyword">type </span>('a, 't) m</code></dt><dt class="spec type" id="type-monad_ops"><a href="#type-monad_ops" class="anchor"></a><code><span class="keyword">type </span>'t monad_ops</code><code><span class="keyword"> = </span></code><code>{</code><table class="record"><tr id="type-monad_ops.return" class="anchored"><td class="def field"><a href="#type-monad_ops.return" class="anchor"></a><code>return : a. <span class="type-var">'a</span> <span>&#45;&gt;</span> (<span class="type-var">'a</span>, <span class="type-var">'t</span>) <a href="index.html#type-m">m</a>;</code></td></tr><tr id="type-monad_ops.bind" class="anchored"><td class="def field"><a href="#type-monad_ops.bind" class="anchor"></a><code>bind : a b. (<span class="type-var">'a</span>, <span class="type-var">'t</span>) <a href="index.html#type-m">m</a> <span>&#45;&gt;</span> (<span class="type-var">'a</span> <span>&#45;&gt;</span> (<span class="type-var">'b</span>, <span class="type-var">'t</span>) <a href="index.html#type-m">m</a>) <span>&#45;&gt;</span> (<span class="type-var">'b</span>, <span class="type-var">'t</span>) <a href="index.html#type-m">m</a>;</code></td></tr></table><code>}</code></dt></dl></details></div></div></div><div><div class="spec include"><div class="doc"><details open="open"><summary><span class="def"><code><span class="keyword">include </span><a href="../../tjr_monad/Tjr_monad/index.html#module-Event">Tjr_monad.Event</a></code></span></summary><aside></aside><dl><dt class="spec type" id="type-event"><a href="#type-event" class="anchor"></a><code><span class="keyword">type </span>'a event</code></dt><dd><p>The type of events that resolve to <code>'a</code></p></dd></dl><dl><dt class="spec type" id="type-event_ops"><a href="#type-event_ops" class="anchor"></a><code><span class="keyword">type </span>'t event_ops</code><code><span class="keyword"> = </span></code><code>{</code><table class="record"><tr id="type-event_ops.ev_create" class="anchored"><td class="def field"><a href="#type-event_ops.ev_create" class="anchor"></a><code>ev_create : a. unit <span>&#45;&gt;</span> (<span class="type-var">'a</span> <a href="index.html#type-event">event</a>, <span class="type-var">'t</span>) <a href="../../tjr_monad/Tjr_monad/Monad_ops/index.html#type-m">Tjr_monad.Monad_ops.m</a>;</code></td></tr><tr id="type-event_ops.ev_wait" class="anchored"><td class="def field"><a href="#type-event_ops.ev_wait" class="anchor"></a><code>ev_wait : a. <span class="type-var">'a</span> <a href="index.html#type-event">event</a> <span>&#45;&gt;</span> (<span class="type-var">'a</span>, <span class="type-var">'t</span>) <a href="../../tjr_monad/Tjr_monad/Monad_ops/index.html#type-m">Tjr_monad.Monad_ops.m</a>;</code></td></tr><tr id="type-event_ops.ev_signal" class="anchored"><td class="def field"><a href="#type-event_ops.ev_signal" class="anchor"></a><code>ev_signal : a. <span class="type-var">'a</span> <a href="index.html#type-event">event</a> <span>&#45;&gt;</span> <span class="type-var">'a</span> <span>&#45;&gt;</span> (unit, <span class="type-var">'t</span>) <a href="../../tjr_monad/Tjr_monad/Monad_ops/index.html#type-m">Tjr_monad.Monad_ops.m</a>;</code></td></tr></table><code>}</code></dt><dd><p>Multiple threads can be waiting on an event. Only one thread should signal the event. It is an error to signal the same event more than once. If this happens, the new signalled value is discarded and no further actions are taken. FIXME perhaps we should throw an exception or something. An event is a bit like a channel that multiple readers can register on (and all will receive any msgs), and which only carries at most one msg.</p><p>NOTE lwt has two types, <code>'a t</code> for promises and <code>'a u</code> for resolvers. These are implemented using the same underlying structure.</p></dd></dl></details></div></div></div><div><div class="spec include"><div class="doc"><details open="open"><summary><span class="def"><code><span class="keyword">include </span><a href="../../tjr_monad/Tjr_monad/index.html#module-With_state">Tjr_monad.With_state</a></code></span></summary><aside></aside><dl><dt class="spec type" id="type-with_state"><a href="#type-with_state" class="anchor"></a><code><span class="keyword">type </span>('s, 't) with_state</code><code><span class="keyword"> = </span></code><code>{</code><table class="record"><tr id="type-with_state.with_state" class="anchored"><td class="def field"><a href="#type-with_state.with_state" class="anchor"></a><code>with_state : a. (state:<span class="type-var">'s</span> <span>&#45;&gt;</span> set_state:(<span class="type-var">'s</span> <span>&#45;&gt;</span> (unit, <span class="type-var">'t</span>) <a href="../../tjr_monad/Tjr_monad/Monad_ops/index.html#type-m">Tjr_monad.Monad_ops.m</a>) <span>&#45;&gt;</span> (<span class="type-var">'a</span>, <span class="type-var">'t</span>) <a href="../../tjr_monad/Tjr_monad/Monad_ops/index.html#type-m">Tjr_monad.Monad_ops.m</a>) <span>&#45;&gt;</span> (<span class="type-var">'a</span>, <span class="type-var">'t</span>) <a href="../../tjr_monad/Tjr_monad/Monad_ops/index.html#type-m">Tjr_monad.Monad_ops.m</a>;</code></td></tr></table><code>}</code></dt><dd><p>A type to allow parameterization over a generic notion of &quot;part of state&quot;. Presumably the part of the state is locked while the monadic operation completes, and then the lock is released.</p></dd></dl></details></div></div></div></details></div></div></div><div><div class="spec include"><div class="doc"><details open="open"><summary><span class="def"><code><span class="keyword">include </span><a href="../../tjr_monad/Tjr_monad/index.html#module-Mref">Tjr_monad.Mref</a></code></span></summary><aside></aside><dl><dt class="spec type" id="type-mref"><a href="#type-mref" class="anchor"></a><code><span class="keyword">type </span>('a, 's) mref</code><code><span class="keyword"> = </span></code><code>{</code><table class="record"><tr id="type-mref.get" class="anchored"><td class="def field"><a href="#type-mref.get" class="anchor"></a><code>get : unit <span>&#45;&gt;</span> (<span class="type-var">'a</span>, <span class="type-var">'s</span>) <a href="../../tjr_monad/Tjr_monad/Monad_ops/index.html#type-m">Tjr_monad.Monad_ops.m</a>;</code></td></tr><tr id="type-mref.set" class="anchored"><td class="def field"><a href="#type-mref.set" class="anchor"></a><code>set : <span class="type-var">'a</span> <span>&#45;&gt;</span> (unit, <span class="type-var">'s</span>) <a href="../../tjr_monad/Tjr_monad/Monad_ops/index.html#type-m">Tjr_monad.Monad_ops.m</a>;</code></td></tr></table><code>}</code></dt><dd><p>Monadic reference operations (deprecated)</p></dd></dl></details></div></div></div></div></body></html>